<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Most Liked Songs</title>
<style>
  body {
    background-color: black;
    color: white;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: purple;
    margin-bottom: 20px;
  }
  .songs-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }
  .song {
    background-color: #222;
    padding: 15px;
    border-radius: 8px;
    width: 90%;
    max-width: 600px;
  }
  .song h2 {
    margin: 0 0 10px 0;
    color: purple;
  }
  .like-count {
    font-weight: bold;
  }
  /* Sold badge styles */
  .sold-badge {
    display: inline-flex;
    align-items: center;
    background-color: #2e7d32;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.9em;
    margin-top: 10px;
  }
  .sold-badge svg {
    width: 16px;
    height: 16px;
    margin-right: 5px;
  }

  /* Navigation menu styles (same as other pages) */
  .nav-container {
    position: absolute;
    top: 20px;
    right: 20px;
  }
  .dropdown {
    position: relative;
    display: inline-block;
  }
  .dropbtn {
    background-color: purple;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.3s;
  }
  .dropbtn:hover {
    background-color: #b366e0;
  }
  .dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    top: 50px;
    background-color: #222;
    min-width: 160px;
    box-shadow: 0px 8px 16px rgba(0,0,0,0.3);
    border-radius: 8px;
    overflow: hidden;
    transition: opacity 0.3s;
  }
  .dropdown.show .dropdown-content {
    display: block;
  }
  .dropdown-content a {
    display: block;
    padding: 12px 16px;
    color: white;
    text-decoration: none;
  }
  .dropdown-content a:hover {
    background-color: #555;
  }
</style>
</head>
<body>

<!-- Navigation menu -->
<div class="nav-container" id="navContainer">
  <div class="dropdown" id="navDropdown">
    <button class="dropbtn" id="menuButton">Navigate</button>
    <div class="dropdown-content" id="dropdownMenu">
      <a href="index.html">Home</a>
      <a href="explore.html">Explore Producers</a>
      <a href="add-your-music.html">Most Liked</a>
    </div>
  </div>
</div>

<h1>Most Liked Songs</h1>
<div class="songs-container" id="songsContainer">
  <!-- Songs will be loaded here -->
</div>

<script>
  // Load likes and sold status
  const allSongs = [
    { producer: "DJ Cool", songId: "producer1_song1", title: "Chill Vibes", likes: 0, sold: false },
    { producer: "BeatMaster", songId: "producer2_song2", title: "Night Drive", likes: 0, sold: false },
    { producer: "TrapKing", songId: "trapking_trap1", title: "Trap Banger", likes: 0, sold: false }
  ];

  // Fetch likes and sold status from localStorage
  allSongs.forEach(s => {
    const stored = JSON.parse(localStorage.getItem('likes_' + s.songId) || '{}');
    s.likes = stored.count || 0;
    if (stored.sold !== undefined) s.sold = stored.sold;
  });

  // Sort by likes
  allSongs.sort((a, b) => b.likes - a.likes);

  const container = document.getElementById('songsContainer');

  allSongs.forEach(s => {
    const div = document.createElement('div');
    div.className = 'song';

    const soldBadge = s.sold ? `
      <div class="sold-badge">
        <!-- Tick SVG -->
        <svg viewBox="0 0 24 24" fill="white">
          <path d="M20.7 5.3a1 1 0 00-1.4 0L9 15.6 4.7 11.3a1 1 0 00-1.4 1.4l5 5a1 1 0 001.4 0l11-11a1 1 0 000-1.4z"/>
        </svg>
        Sold
      </div>
    ` : '';

    div.innerHTML = `
      <h2>Producer: ${s.producer}</h2>
      <p>Likes: <span class="like-count">${s.likes}</span></p>
      ${soldBadge}
    `;
    container.appendChild(div);
  });
</script>

<!-- JS for menu toggle -->
<script>
  const menuBtn = document.getElementById('menuButton');
  const dropdownDiv = document.getElementById('dropdownMenu');

  if (menuBtn && dropdownDiv) {
    menuBtn.addEventListener('click', () => {
      dropdownDiv.parentElement.classList.toggle('show');
    });
    document.addEventListener('click', (e) => {
      if (!dropdownDiv.contains(e.target) && e.target !== menuBtn) {
        dropdownDiv.parentElement.classList.remove('show');
      }
    });
  }
</script>
<br>
<footer style="text-align: center; padding: 10px; color: gray;">
  &copy; 2025 PrinceMorgan. All rights reserved.
</footer>
</body>
</html>